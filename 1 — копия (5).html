<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAOGSURBVDhPJdJ9TNVVGMDxw+Wde3kRdAaasYFtWoQjnWGb4gAHm6CoTSWJtLRZKFlpN3IE4y0TVOLu8uKQeyUYhLw4UEQkr0HCeBsxSSMBB0hCtdC8jZj67UH+ODvP7+yczznP8/xUSlkbwatWsszLFR93BzYE+rDzQDRvpyYQZ/iKOPNpYi+Y2H3dQnzfEAdv/867faNsycvBf6kbam9WBSFLdNjYKXRKEfWqF4lHd/FxfgqflKRx5LtvSGwo4fDPPSSP3MMwPsnpv2c5+NsQgd5aVOArqwnxckEJsFzGntXepCfHk3E+i/Ti46SXp5Px0wXSJocxPvqLGquVstmnfH6jlvVuGpTO0YlVrjqUo2KRvGCdqw36qCAMBccwmJLIzT9E7qkEMs98QVbecXKqizD80sOhT7exSSuAjb0GPyfH50Ck9wLCX3Bl8yJb0mICKKn4ksKGk+Slx5IcvpK0t8IwtfXQBOzbG0uokw1KOWh4UzufQpCblsXOtrKoeF3G+ZoMOmVzUVs9Oz0VAbJ2OCwMQ+ZpPgwOYIONkheIErHY4znga2dLqP9Clkm8VjZX/VBEtwDm/layIvz4en8ENb29FDddQr/xJTbKPqV0Grxd5m8N1SoS31hKsMTvL1HU3u/i5tNZKv+dwmgpo7CzmnLrGDcErRtu5T1puVJudlJJW9zl0Acr3Ihf4cI6ibP3hVD+aJi+mcdceTiO+XYzpXctXPnzVx4+e8ITQaos1XOAPcrDjoVyaP+LzkS7KzZJbpXVJ2jAiuW/aWoH6vn+ZikXJ+/Qa50W4BkzAvRYpwRwnQc8BXjHS0OMAJESm08doLi+iEvN5VRWJHGx7iSNU2Pcsj7m7sw/jM5YaZ++L4BW8neXfjrIT+TlwNFwfyKlFvrQ5RibTRQ0mym8WkzpjxU0jN+j68EE3ROjDPzxgJaJYQFcpJI66afMc5Xf8rIbMX5aMnYHc9aYRI6liuyBDqoG+2kbHeH60B06Rga5NTZC4+CAAM4CzCFyq48Aa+R7m4c9H3nr0Psu4ExcFKnF2Rg7W6nqbqeiq526vk5a+vswdXYIIH+gcppHXKSvr0m8Vtp6ZH0QydGhpOr1JBiz+ezqZZKbGkiRkXmtkeyWaxy7XC+AvRyW/OcgW5n95AUBnhoi1/iyfUcIW5MS2Jx7gq3nCthuPsuu0nPsKTOzo9REWP63/A9LfT5MoLhg6gAAAABJRU5ErkJggg==">
  <title>Doc</title>
  <style>
  *:not(hr), *::after, *::before {box-sizing: border-box;margin:0;padding:0;border:0}ul {list-style-type: none}
#i{padding: 0px 0;background: linear-gradient(rgba(0,0,0,0.9), blue); 
text-align: center;
}
.hide{display:none}

label{margin:2px; padding: 7px; display: inline-block; background:#ded;border:2px solid green; cursor: pointer;}
  .palet {display:flex;}
  .palet .color {width:24px; height:24px;background: white;border:1px solid blue;}
  </style>  
</head>
<body text="black" bgcolor="white">
<a href="file:///K:/!/projAll/html2/dig2.html">feb2023</a>
<a href="file:///K:/!/projAll/html1/main.html">dec2023</a>
<a id="a4" href="file:///K:/!/projAll/css_%D0%BF%D1%81%D0%B5%D0%B2%D0%B4%D1%8B/index.html">два кота
(с iframes)
</a>


<div id=i>
<svg id="svg" width="900" height="415" viewBox="0 0 900 415" fill="none"
onmousedown="dawn['down']=true;
dawn.x=event.clientX; dawn.y=event.clientY-i.offsetTop;
eff.setAttribute('x',dawn.x);
eff.setAttribute('y',dawn.y);
eff.classList.remove('hide');"

onmousemove="
if(dawn['down']){
let x=dawn.x-event.clientX;
let y=dawn.y-event.clientY;
//if(x<0){dawn.x=event.clientX; eff.setAttribute('x',dawn.x);}
//if(y<0){dawn.y=event.clientY-i.offsetTop;eff.setAttribute('y',dawn.y);}
eff.setAttribute('width',Math.abs(x));
eff.setAttribute('height',Math.abs(y));
dawn.w=Math.abs(x);
dawn.h=Math.abs(y);
}
"
onmouseup="
dawn['down']=false;eff.classList.add('hide');
let x=dawn.x-event.clientX;
let y=dawn.y-event.clientY;
console.log([dawn.x,dawn.y,Math.abs(x),Math.abs(y)].join(','));
if(document.getElementById('ute'))ute.remove();
svg.innerHTML+=`<rect id='ute' x='`
+dawn.x+`' y='`
+dawn.y+`' width='`
+dawn.w+`' height='`
+dawn.h+`' stroke='red' stroke-width='1' fill='none'></rect>`;
move=ute;
"

>
<style type="text/css">
.rect1, .polygon1 {stroke: blue;}
.txt1 {font-family: Arial; font-size: 12px; line-height: 0; fill:white;}
textPath {font-family: sans-serif; font-size: 16px;}
</style>
<rect class="x" x="0" y="0" width="900" height="415" fill="#ded"></rect>
<ellipse class="x" cx="462.5" cy="302.5" rx="49.5" ry="10" stroke="blue" fill="cyan" opacity="1" stroke-width="1"></ellipse>


<rect id="eff" class="hide" x="0" y="0" width="90" height="41" stroke="red" fill="none"></rect>
</svg>
</div>
<label onclick="but0()">rest</label>
<label onclick="but1()">round</label>
<label onclick="but2()">line /</label>
<label onclick="but3()">line \</label>
 <article class="palet" style="">
	<div class="color"></div>
	<div class="color"></div>
	<div class="color"></div>
	<div class="color"></div>
	<div class="color"></div>
	<div class="color"></div>
	<div class="color"></div>
	<div class="color"></div>
	<div class="color"></div>
	<div class="color"></div>
	<div class="color"></div>
	<div class="color"></div>
	<div class="color"></div>
	<div class="color"></div>
	<div class="color"></div>
	<div class="color"></div>
	<div class="color"></div>
	<div class="color"></div>	
	<div class="color"></div>	
</article>
<script>
const cc=['white','red','black','green','yellow','lime',
'violet','purple','navy','aqua','blue','gold',
'teal','olive','maroon','silver','springgreen','#6c757d','fuchsia'];
let move=null;
let n=0;
let ink=cc[4];
let dawn={x:0,y:0,w:1,h:1};
//let efa=[{x:5,y:41},{x:41,y:41},{x:41,y:5},{x:5,y:5},];

jp=[...document.querySelectorAll('.color')];
//alert(jp.length);
jp.forEach((x,i)=>{
	x.style.background=cc[i]; 
	x.addEventListener('click',()=>{
		ink=cc[i];
		//alert(ink);
	});
});
//jp[0].style.backGround='red';
//alert(jp[0].setAttribute('back'));

const but0=()=>{//alert(dawn.h);
n++;
if(document.getElementById('ute'))ute.remove();
//svg.innerHTML+=`<rect id='j`+n+`' x='`
svg.innerHTML+=`<rect id='mov' x='`

+dawn.x+`' y='`
+dawn.y+`' width='`
+dawn.w+`' height='`
+dawn.h+`' fill='`
+ink+`' stroke='black' stroke-width='1' onclick='move=this'></rect>`
}

const but1=()=>{
n++;
if(document.getElementById('ute'))ute.remove();
svg.innerHTML+=
`<ellipse  id='j`+n+`' rx="`
+(dawn.w/2)+`" ry="`
+(dawn.h/2)+`" cx="`
+(dawn.x+dawn.w/2)+`" cy="`
+(dawn.y+dawn.h/2)+`" fill="`
+ink+`"  stroke='black' stroke-width='1' onclick='move=this'/>`
}

const but2=()=>{
n++;
if(document.getElementById('ute'))ute.remove();
svg.innerHTML+=
`<line  id='j`+n+`' x1="`
+(dawn.x+dawn.w)+`" y1="`
+dawn.y+`" x2="`
+dawn.x+`" y2="`
+(dawn.y+dawn.h)+`" stroke="`
+ink+`" stroke-linecap="square" onclick='move=this'/>`
}

const but3=()=>{
n++;
if(document.getElementById('ute'))ute.remove();
svg.innerHTML+=
`<line  id='j`+n+`' x1="`
+dawn.x+`" y1="`
+dawn.y+`" x2="`
+(dawn.x+dawn.w)+`" y2="`
+(dawn.y+dawn.h)+`" stroke="`
+ink+`" stroke-linecap="square" onclick='move=this'/>`
}



 //********************* выбранная точка перемещается курсорными клавишами
 document.addEventListener('keydown', (e) => {// ←↑↓→
	// сканирование клавы по обобщенной схеме
	switch(e.key) {//
		case 'ArrowDown': //↓
			//if(c>-1)
				{
				dawn.y++;
				e.preventDefault();
				break;
				}
		
		case 'ArrowUp': //↑
			//if(c>-1)
				{	
				dawn.y--;
				e.preventDefault();
				break;
				}		  
		case 'ArrowRight': //→
			//if(c>-1)
				{	
				dawn.x++;
				e.preventDefault();
				break;
				}	
		case 'ArrowLeft': //←
			//if(c>-1)
				{	
				dawn.x--;
				e.preventDefault();
				break;
				}		

		case '0': if(c>-1){fa(c)}// numpad0	, 0	
		default: break;
	}// switch
	//vw();	
/*	
if(document.getElementById('ute')){	
ute.setAttribute('x',dawn.x);
ute.setAttribute('y',dawn.y);	
ute.setAttribute('width',dawn.w);
ute.setAttribute('height',dawn.h);
}	
*/
//if(document.getElementById('ute'))
{	
mov.setAttribute('x',dawn.x);
mov.setAttribute('y',dawn.y);	
mov.setAttribute('width',dawn.w);
mov.setAttribute('height',dawn.h);
}	
	});
//**************************

</script>   
</body>
</html>